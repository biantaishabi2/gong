# Generated by bdd_compiler from /home/wangbo/document/gong/docs/bdd/tool_result.dsl. DO NOT EDIT.

defmodule Gong.BDD.Generated.ToolResultTest do
  use ExUnit.Case, async: false

  @moduletag :bdd_generated

  # Source: TOOLRES-001
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-001] from_text 兼容旧格式" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-001"}
    # line 5: WHEN tool_result_from_text text="File written successfully"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "File written successfully"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 5, raw: "WHEN tool_result_from_text text=\"File written successfully\""}, 5)
    # line 6: THEN assert_tool_result_content contains="File written successfully"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "File written successfully"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 6, raw: "THEN assert_tool_result_content contains=\"File written successfully\""}, 6)
    # line 7: THEN assert_tool_result_details_nil
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_nil, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 7, raw: "THEN assert_tool_result_details_nil"}, 7)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-002
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-002] new 构造带 details" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-002"}
    # line 10: WHEN tool_result_new content="Edited: /src/main.ex" details_key="diff_lines" details_value="3"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_new, %{content: "Edited: /src/main.ex", details_key: "diff_lines", details_value: "3"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 10, raw: "WHEN tool_result_new content=\"Edited: /src/main.ex\" details_key=\"diff_lines\" details_value=\"3\""}, 10)
    # line 11: THEN assert_tool_result_content contains="Edited"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "Edited"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 11, raw: "THEN assert_tool_result_content contains=\"Edited\""}, 11)
    # line 12: THEN assert_tool_result_has_details key="diff_lines"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_has_details, %{key: "diff_lines"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 12, raw: "THEN assert_tool_result_has_details key=\"diff_lines\""}, 12)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-003
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-003] 错误结果标记" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-003"}
    # line 15: WHEN tool_result_error content="File not found: /tmp/nope"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_error, %{content: "File not found: /tmp/nope"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 15, raw: "WHEN tool_result_error content=\"File not found: /tmp/nope\""}, 15)
    # line 16: THEN assert_tool_result_is_error
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_is_error, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 16, raw: "THEN assert_tool_result_is_error"}, 16)
    # line 17: THEN assert_tool_result_content contains="not found"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "not found"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 17, raw: "THEN assert_tool_result_content contains=\"not found\""}, 17)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-004
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-004] content 和 details 独立" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-004"}
    # line 20: WHEN tool_result_new content="OK" details_key="exit_code" details_value="0"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_new, %{content: "OK", details_key: "exit_code", details_value: "0"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 20, raw: "WHEN tool_result_new content=\"OK\" details_key=\"exit_code\" details_value=\"0\""}, 20)
    # line 21: THEN assert_tool_result_content contains="OK"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "OK"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 21, raw: "THEN assert_tool_result_content contains=\"OK\""}, 21)
    # line 22: THEN assert_tool_result_has_details key="exit_code"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_has_details, %{key: "exit_code"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 22, raw: "THEN assert_tool_result_has_details key=\"exit_code\""}, 22)
    # line 23: THEN assert_tool_result_details_value key="exit_code" expected="0"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_value, %{expected: "0", key: "exit_code"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 23, raw: "THEN assert_tool_result_details_value key=\"exit_code\" expected=\"0\""}, 23)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-005
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-005] details 为 nil 时不影响 content" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-005"}
    # line 26: WHEN tool_result_from_text text="hello world"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "hello world"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 26, raw: "WHEN tool_result_from_text text=\"hello world\""}, 26)
    # line 27: THEN assert_tool_result_content contains="hello"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "hello"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 27, raw: "THEN assert_tool_result_content contains=\"hello\""}, 27)
    # line 28: THEN assert_tool_result_details_nil
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_nil, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 28, raw: "THEN assert_tool_result_details_nil"}, 28)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-006
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-006] is_error 默认为 false" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-006"}
    # line 31: WHEN tool_result_from_text text="success"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "success"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 31, raw: "WHEN tool_result_from_text text=\"success\""}, 31)
    # line 32: THEN assert_tool_result_not_error
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_not_error, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 32, raw: "THEN assert_tool_result_not_error"}, 32)
    _ctx = ctx
    :ok
  end

end
