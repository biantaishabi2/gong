# Generated by bdd_compiler from /home/wangbo/document/gong/docs/bdd/tool_result.dsl. DO NOT EDIT.

defmodule Gong.BDD.Generated.ToolResultTest do
  use ExUnit.Case, async: false

  @moduletag :bdd_generated

  # Source: TOOLRES-001
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-001] from_text 兼容旧格式" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-001"}
    # line 5: WHEN tool_result_from_text text="File written successfully"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "File written successfully"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 5, raw: "WHEN tool_result_from_text text=\"File written successfully\""}, 5)
    # line 6: THEN assert_tool_result_content contains="File written successfully"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "File written successfully"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 6, raw: "THEN assert_tool_result_content contains=\"File written successfully\""}, 6)
    # line 7: THEN assert_tool_result_details_nil
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_nil, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 7, raw: "THEN assert_tool_result_details_nil"}, 7)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-002
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-002] new 构造带 details" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-002"}
    # line 10: WHEN tool_result_new content="Edited: /src/main.ex" details_key="diff_lines" details_value="3"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_new, %{content: "Edited: /src/main.ex", details_key: "diff_lines", details_value: "3"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 10, raw: "WHEN tool_result_new content=\"Edited: /src/main.ex\" details_key=\"diff_lines\" details_value=\"3\""}, 10)
    # line 11: THEN assert_tool_result_content contains="Edited"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "Edited"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 11, raw: "THEN assert_tool_result_content contains=\"Edited\""}, 11)
    # line 12: THEN assert_tool_result_has_details key="diff_lines"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_has_details, %{key: "diff_lines"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 12, raw: "THEN assert_tool_result_has_details key=\"diff_lines\""}, 12)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-003
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-003] 错误结果标记" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-003"}
    # line 15: WHEN tool_result_error content="File not found: /tmp/nope"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_error, %{content: "File not found: /tmp/nope"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 15, raw: "WHEN tool_result_error content=\"File not found: /tmp/nope\""}, 15)
    # line 16: THEN assert_tool_result_is_error
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_is_error, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 16, raw: "THEN assert_tool_result_is_error"}, 16)
    # line 17: THEN assert_tool_result_content contains="not found"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "not found"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 17, raw: "THEN assert_tool_result_content contains=\"not found\""}, 17)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-004
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-004] content 和 details 独立" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-004"}
    # line 20: WHEN tool_result_new content="OK" details_key="exit_code" details_value="0"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_new, %{content: "OK", details_key: "exit_code", details_value: "0"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 20, raw: "WHEN tool_result_new content=\"OK\" details_key=\"exit_code\" details_value=\"0\""}, 20)
    # line 21: THEN assert_tool_result_content contains="OK"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "OK"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 21, raw: "THEN assert_tool_result_content contains=\"OK\""}, 21)
    # line 22: THEN assert_tool_result_has_details key="exit_code"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_has_details, %{key: "exit_code"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 22, raw: "THEN assert_tool_result_has_details key=\"exit_code\""}, 22)
    # line 23: THEN assert_tool_result_details_value key="exit_code" expected="0"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_value, %{expected: "0", key: "exit_code"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 23, raw: "THEN assert_tool_result_details_value key=\"exit_code\" expected=\"0\""}, 23)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-005
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-005] details 为 nil 时不影响 content" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-005"}
    # line 26: WHEN tool_result_from_text text="hello world"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "hello world"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 26, raw: "WHEN tool_result_from_text text=\"hello world\""}, 26)
    # line 27: THEN assert_tool_result_content contains="hello"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_content, %{contains: "hello"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 27, raw: "THEN assert_tool_result_content contains=\"hello\""}, 27)
    # line 28: THEN assert_tool_result_details_nil
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_details_nil, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 28, raw: "THEN assert_tool_result_details_nil"}, 28)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-006
  @tag :tool_result
  @tag :unit
  test "[TOOLRES-006] is_error 默认为 false" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-006"}
    # line 31: WHEN tool_result_from_text text="success"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_result_from_text, %{text: "success"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 31, raw: "WHEN tool_result_from_text text=\"success\""}, 31)
    # line 32: THEN assert_tool_result_not_error
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_result_not_error, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 32, raw: "THEN assert_tool_result_not_error"}, 32)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-101
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-101]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-101"}
    # line 37: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 37, raw: "GIVEN create_temp_dir"}, 37)
    # line 38: GIVEN create_temp_file path="target.txt" content="hello world"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_file, %{content: "hello world", path: "target.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 38, raw: "GIVEN create_temp_file path=\"target.txt\" content=\"hello world\""}, 38)
    # line 39: WHEN tool_edit path="target.txt" old_string="hello" new_string="hi"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_edit, %{new_string: "hi", old_string: "hello", path: "target.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 39, raw: "WHEN tool_edit path=\"target.txt\" old_string=\"hello\" new_string=\"hi\""}, 39)
    # line 40: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 40, raw: "THEN assert_is_tool_result"}, 40)
    # line 41: THEN assert_tool_success content_contains="target.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "target.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 41, raw: "THEN assert_tool_success content_contains=\"target.txt\""}, 41)
    # line 42: THEN assert_result_field field="replacements" expected="1"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_result_field, %{expected: "1", field: "replacements"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 42, raw: "THEN assert_result_field field=\"replacements\" expected=\"1\""}, 42)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-102
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-102]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-102"}
    # line 45: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 45, raw: "GIVEN create_temp_dir"}, 45)
    # line 46: WHEN tool_bash command="echo dual_channel_test"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_bash, %{command: "echo dual_channel_test"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 46, raw: "WHEN tool_bash command=\"echo dual_channel_test\""}, 46)
    # line 47: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 47, raw: "THEN assert_is_tool_result"}, 47)
    # line 48: THEN assert_tool_success content_contains="dual_channel_test"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "dual_channel_test"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 48, raw: "THEN assert_tool_success content_contains=\"dual_channel_test\""}, 48)
    # line 49: THEN assert_exit_code expected=0
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_exit_code, %{expected: 0}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 49, raw: "THEN assert_exit_code expected=0"}, 49)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-103
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-103]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-103"}
    # line 52: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 52, raw: "GIVEN create_temp_dir"}, 52)
    # line 53: GIVEN create_temp_file path="sample.txt" content="line1\nline2\nline3"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_file, %{content: "line1\\nline2\\nline3", path: "sample.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 53, raw: "GIVEN create_temp_file path=\"sample.txt\" content=\"line1\\nline2\\nline3\""}, 53)
    # line 54: WHEN tool_read path="sample.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_read, %{path: "sample.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 54, raw: "WHEN tool_read path=\"sample.txt\""}, 54)
    # line 55: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 55, raw: "THEN assert_is_tool_result"}, 55)
    # line 56: THEN assert_tool_success content_contains="line1" truncated=false
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "line1", truncated: false}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 56, raw: "THEN assert_tool_success content_contains=\"line1\" truncated=false"}, 56)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-104
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-104]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-104"}
    # line 59: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 59, raw: "GIVEN create_temp_dir"}, 59)
    # line 60: WHEN tool_write path="out.txt" content="written"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_write, %{content: "written", path: "out.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 60, raw: "WHEN tool_write path=\"out.txt\" content=\"written\""}, 60)
    # line 61: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 61, raw: "THEN assert_is_tool_result"}, 61)
    # line 62: THEN assert_tool_success content_contains="out.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "out.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 62, raw: "THEN assert_tool_success content_contains=\"out.txt\""}, 62)
    # line 63: THEN assert_result_field field="bytes_written" expected="7"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_result_field, %{expected: "7", field: "bytes_written"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 63, raw: "THEN assert_result_field field=\"bytes_written\" expected=\"7\""}, 63)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-105
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-105]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-105"}
    # line 66: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 66, raw: "GIVEN create_temp_dir"}, 66)
    # line 67: GIVEN create_temp_file path="grep_target.txt" content="alpha\nbeta\ngamma"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_file, %{content: "alpha\\nbeta\\ngamma", path: "grep_target.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 67, raw: "GIVEN create_temp_file path=\"grep_target.txt\" content=\"alpha\\nbeta\\ngamma\""}, 67)
    # line 68: WHEN tool_grep pattern="beta" path="grep_target.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_grep, %{path: "grep_target.txt", pattern: "beta"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 68, raw: "WHEN tool_grep pattern=\"beta\" path=\"grep_target.txt\""}, 68)
    # line 69: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 69, raw: "THEN assert_is_tool_result"}, 69)
    # line 70: THEN assert_tool_success content_contains="beta"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "beta"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 70, raw: "THEN assert_tool_success content_contains=\"beta\""}, 70)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-106
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-106]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-106"}
    # line 73: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 73, raw: "GIVEN create_temp_dir"}, 73)
    # line 74: GIVEN create_temp_file path="findme.txt" content="x"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_file, %{content: "x", path: "findme.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 74, raw: "GIVEN create_temp_file path=\"findme.txt\" content=\"x\""}, 74)
    # line 75: WHEN tool_find pattern="findme.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_find, %{pattern: "findme.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 75, raw: "WHEN tool_find pattern=\"findme.txt\""}, 75)
    # line 76: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 76, raw: "THEN assert_is_tool_result"}, 76)
    # line 77: THEN assert_tool_success content_contains="findme.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "findme.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 77, raw: "THEN assert_tool_success content_contains=\"findme.txt\""}, 77)
    _ctx = ctx
    :ok
  end

  # Source: TOOLRES-107
  @tag :external_io
  @tag :integration
  @tag :tool_result
  test "[TOOLRES-107]" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "TOOLRES-107"}
    # line 80: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 80, raw: "GIVEN create_temp_dir"}, 80)
    # line 81: GIVEN create_temp_file path="visible.txt" content="y"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_file, %{content: "y", path: "visible.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 81, raw: "GIVEN create_temp_file path=\"visible.txt\" content=\"y\""}, 81)
    # line 82: WHEN tool_ls path="."
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :tool_ls, %{path: "."}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 82, raw: "WHEN tool_ls path=\".\""}, 82)
    # line 83: THEN assert_is_tool_result
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_is_tool_result, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 83, raw: "THEN assert_is_tool_result"}, 83)
    # line 84: THEN assert_tool_success content_contains="visible.txt"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_tool_success, %{content_contains: "visible.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/tool_result.dsl", line: 84, raw: "THEN assert_tool_success content_contains=\"visible.txt\""}, 84)
    _ctx = ctx
    :ok
  end

end
