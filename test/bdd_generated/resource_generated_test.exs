# Generated by bdd_compiler from /home/wangbo/document/gong/docs/bdd/resource.dsl. DO NOT EDIT.

defmodule Gong.BDD.Generated.ResourceTest do
  use ExUnit.Case, async: false

  @moduletag :bdd_generated

  # Source: RESOURCE-001
  @tag :resource
  @tag :unit
  test "[RESOURCE-001] 发现 context 下 md 文件并注入" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-001"}
    # line 9: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 9, raw: "GIVEN create_temp_dir"}, 9)
    # line 10: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 10, raw: "GIVEN create_resource_dir scope=\"project\""}, 10)
    # line 11: GIVEN create_resource_file name="rules.md" content="# Project Rules\nAlways use TypeScript"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# Project Rules\\nAlways use TypeScript", name: "rules.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 11, raw: "GIVEN create_resource_file name=\"rules.md\" content=\"# Project Rules\\nAlways use TypeScript\""}, 11)
    # line 12: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 12, raw: "WHEN load_resources"}, 12)
    # line 13: THEN assert_resource_count expected=1
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 1}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 13, raw: "THEN assert_resource_count expected=1"}, 13)
    # line 14: THEN assert_resource_content contains="TypeScript"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_content, %{contains: "TypeScript"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 14, raw: "THEN assert_resource_content contains=\"TypeScript\""}, 14)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-002
  @tag :resource
  @tag :unit
  test "[RESOURCE-002] 全局加项目两级合并项目优先" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-002"}
    # line 17: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 17, raw: "GIVEN create_temp_dir"}, 17)
    # line 18: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 18, raw: "GIVEN create_resource_dir scope=\"project\""}, 18)
    # line 19: GIVEN create_resource_file name="style.md" content="# Style Guide\nUse 2 spaces"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# Style Guide\\nUse 2 spaces", name: "style.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 19, raw: "GIVEN create_resource_file name=\"style.md\" content=\"# Style Guide\\nUse 2 spaces\""}, 19)
    # line 20: GIVEN create_resource_file name="api.md" content="# API Rules\nREST only"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# API Rules\\nREST only", name: "api.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 20, raw: "GIVEN create_resource_file name=\"api.md\" content=\"# API Rules\\nREST only\""}, 20)
    # line 21: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 21, raw: "WHEN load_resources"}, 21)
    # line 22: THEN assert_resource_count expected=2
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 2}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 22, raw: "THEN assert_resource_count expected=2"}, 22)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-003
  @tag :resource
  @tag :unit
  test "[RESOURCE-003] reload 后新内容生效" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-003"}
    # line 25: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 25, raw: "GIVEN create_temp_dir"}, 25)
    # line 26: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 26, raw: "GIVEN create_resource_dir scope=\"project\""}, 26)
    # line 27: GIVEN create_resource_file name="rules.md" content="# Version 1"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# Version 1", name: "rules.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 27, raw: "GIVEN create_resource_file name=\"rules.md\" content=\"# Version 1\""}, 27)
    # line 28: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 28, raw: "WHEN load_resources"}, 28)
    # line 29: THEN assert_resource_content contains="Version 1"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_content, %{contains: "Version 1"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 29, raw: "THEN assert_resource_content contains=\"Version 1\""}, 29)
    # line 30: GIVEN create_resource_file name="rules.md" content="# Version 2"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# Version 2", name: "rules.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 30, raw: "GIVEN create_resource_file name=\"rules.md\" content=\"# Version 2\""}, 30)
    # line 31: WHEN reload_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :reload_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 31, raw: "WHEN reload_resources"}, 31)
    # line 32: THEN assert_resource_content contains="Version 2"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_content, %{contains: "Version 2"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 32, raw: "THEN assert_resource_content contains=\"Version 2\""}, 32)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-004
  @tag :resource
  @tag :unit
  test "[RESOURCE-004] 空 context 目录返回空列表" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-004"}
    # line 39: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 39, raw: "GIVEN create_temp_dir"}, 39)
    # line 40: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 40, raw: "GIVEN create_resource_dir scope=\"project\""}, 40)
    # line 41: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 41, raw: "WHEN load_resources"}, 41)
    # line 42: THEN assert_resource_count expected=0
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 0}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 42, raw: "THEN assert_resource_count expected=0"}, 42)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-005
  @tag :resource
  @tag :unit
  test "[RESOURCE-005] 不存在的路径返回空列表" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-005"}
    # line 45: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 45, raw: "GIVEN create_temp_dir"}, 45)
    # line 46: WHEN load_resources_from_paths paths="/nonexistent/path"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources_from_paths, %{paths: "/nonexistent/path"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 46, raw: "WHEN load_resources_from_paths paths=\"/nonexistent/path\""}, 46)
    # line 47: THEN assert_resource_count expected=0
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 0}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 47, raw: "THEN assert_resource_count expected=0"}, 47)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-006
  @tag :resource
  @tag :unit
  test "[RESOURCE-006] 非 md 文件被忽略" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-006"}
    # line 50: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 50, raw: "GIVEN create_temp_dir"}, 50)
    # line 51: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 51, raw: "GIVEN create_resource_dir scope=\"project\""}, 51)
    # line 52: GIVEN create_resource_file name="rules.md" content="# Rules"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# Rules", name: "rules.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 52, raw: "GIVEN create_resource_file name=\"rules.md\" content=\"# Rules\""}, 52)
    # line 53: GIVEN create_resource_file name="notes.txt" content="not markdown"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "not markdown", name: "notes.txt"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 53, raw: "GIVEN create_resource_file name=\"notes.txt\" content=\"not markdown\""}, 53)
    # line 54: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 54, raw: "WHEN load_resources"}, 54)
    # line 55: THEN assert_resource_count expected=1
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 1}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 55, raw: "THEN assert_resource_count expected=1"}, 55)
    _ctx = ctx
    :ok
  end

  # Source: RESOURCE-007
  @tag :resource
  @tag :unit
  test "[RESOURCE-007] 多路径合并加载" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "RESOURCE-007"}
    # line 58: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 58, raw: "GIVEN create_temp_dir"}, 58)
    # line 59: GIVEN create_resource_dir scope="project"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_dir, %{scope: "project"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 59, raw: "GIVEN create_resource_dir scope=\"project\""}, 59)
    # line 60: GIVEN create_resource_file name="a.md" content="# A"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_resource_file, %{content: "# A", name: "a.md"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 60, raw: "GIVEN create_resource_file name=\"a.md\" content=\"# A\""}, 60)
    # line 61: WHEN load_resources
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :load_resources, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 61, raw: "WHEN load_resources"}, 61)
    # line 62: THEN assert_resource_count expected=1
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_count, %{expected: 1}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 62, raw: "THEN assert_resource_count expected=1"}, 62)
    # line 63: THEN assert_resource_content contains="# A"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_resource_content, %{contains: "# A"}, %{file: "/home/wangbo/document/gong/docs/bdd/resource.dsl", line: 63, raw: "THEN assert_resource_content contains=\"# A\""}, 63)
    _ctx = ctx
    :ok
  end

end
