# Generated by bdd_compiler from /home/wangbo/document/gong/docs/bdd/auth.dsl. DO NOT EDIT.

defmodule Gong.BDD.Generated.AuthTest do
  use ExUnit.Case, async: false

  @moduletag :bdd_generated

  # Source: AUTH-001
  @tag :auth
  @tag :unit
  test "[AUTH-001] API Key 认证方式检测" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "AUTH-001"}
    # line 9: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 9, raw: "GIVEN create_temp_dir"}, 9)
    # line 10: WHEN detect_auth_method provider="deepseek"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :detect_auth_method, %{provider: "deepseek"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 10, raw: "WHEN detect_auth_method provider=\"deepseek\""}, 10)
    # line 11: THEN assert_auth_method expected="api_key"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_auth_method, %{expected: "api_key"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 11, raw: "THEN assert_auth_method expected=\"api_key\""}, 11)
    _ctx = ctx
    :ok
  end

  # Source: AUTH-002
  @tag :auth
  @tag :unit
  test "[AUTH-002] OAuth 认证方式检测" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "AUTH-002"}
    # line 14: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 14, raw: "GIVEN create_temp_dir"}, 14)
    # line 15: WHEN detect_auth_method provider="anthropic"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :detect_auth_method, %{provider: "anthropic"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 15, raw: "WHEN detect_auth_method provider=\"anthropic\""}, 15)
    # line 16: THEN assert_auth_method expected="oauth"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_auth_method, %{expected: "oauth"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 16, raw: "THEN assert_auth_method expected=\"oauth\""}, 16)
    _ctx = ctx
    :ok
  end

  # Source: AUTH-003
  @tag :auth
  @tag :unit
  test "[AUTH-003] OAuth 授权 URL 生成" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "AUTH-003"}
    # line 19: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 19, raw: "GIVEN create_temp_dir"}, 19)
    # line 20: WHEN generate_authorize_url client_id="test_client" authorize_url="https://auth.example.com/authorize"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :generate_authorize_url, %{authorize_url: "https://auth.example.com/authorize", client_id: "test_client"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 20, raw: "WHEN generate_authorize_url client_id=\"test_client\" authorize_url=\"https://auth.example.com/authorize\""}, 20)
    # line 21: THEN assert_authorize_url contains="client_id=test_client"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_authorize_url, %{contains: "client_id=test_client"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 21, raw: "THEN assert_authorize_url contains=\"client_id=test_client\""}, 21)
    _ctx = ctx
    :ok
  end

  # Source: AUTH-004
  @tag :auth
  @tag :unit
  test "[AUTH-004] 授权码交换 token" do
    run_id = Gong.BDD.Instructions.V1.new_run_id()
    ctx = %{run_id: run_id, scenario_id: "AUTH-004"}
    # line 24: GIVEN create_temp_dir
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :given, :create_temp_dir, %{}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 24, raw: "GIVEN create_temp_dir"}, 24)
    # line 25: WHEN exchange_auth_code code="test_code_123"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :when, :exchange_auth_code, %{code: "test_code_123"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 25, raw: "WHEN exchange_auth_code code=\"test_code_123\""}, 25)
    # line 26: THEN assert_auth_token contains="test_code_123"
    ctx = Gong.BDD.Instructions.V1.run_step!(ctx, :then, :assert_auth_token, %{contains: "test_code_123"}, %{file: "/home/wangbo/document/gong/docs/bdd/auth.dsl", line: 26, raw: "THEN assert_auth_token contains=\"test_code_123\""}, 26)
    _ctx = ctx
    :ok
  end

end
